plugin: servicenow.itsm.now
enhanced: false
strict: true
table: cmdb_ci_server
columns:
  - name
  - manufacturer
  - model_id
  - host_name
  - sys_class_name
  - operational_status
  - ip_address
  - support_group
compose:
  ip_addr: ip_address
  #supportgrp: support_group if support_group != None else default(omit)
  supportgrp: support_group if support_group != None else 'unknown_support_group'
  ansible_host: host_name  
keyed_groups:
  #- key: sys_class_name | lower
  #- key: support_group | lower | regex_replace('[^a-z0-9_]', '_')
  #- key: "{{ support_group | default('unknown_support_group') | lower | regex_replace('[^a-z0-9_]', '_') }}"
  - key: "{{ support_group | default('unknown_support_group') }}"
    prefix: ''
    separator: ''
    #default: "ungrouped"
  
  

